# SQL 과제 - 5주차

### 1. 성분으로 구분한 아이스크림 총 주문량
![sql-1](/img/sql_1105_1.png)

+ 아이스크림 맛과 성분에 대한 정보를 담은 ICECREAM_INFO 테이블과 아이스크림별 상반기 주문량을 담은 FIRST_HALF 테이블을 조인하였다. 이때, 키 칼럼이 'FLAVOR'로 동일하기 때문에 ON이 아닌 **USING** 을 사용하였다.
+ GROUP BY나 ORDER BY 절에 칼럼명을 모두 작성할 필요 없이 해당 칼럼의 **순서**에 해당하는 숫자를 입력할 수 있다.


### 2. 즐겨찾기가 가장 많은 식당 정보 출력하기
![sql-2](/img/sql_1105_2.png)

+ **WITH절**을 사용하여 쿼리 내에서 사용할 수 있는 테이블을 정의할 수 있다. 본 예제에서는 FOOD TYPE별로 즐겨찾기(FAVORITES) 수의 최댓값을 출력하는 CTE를 정의하였다.
+ 해당 CTE를 기존 테이블과 조인하고, **WHERE절**을 사용해 즐겨찾기 수가 CTE에서 가져온 최댓값과 동일한 식당들만 선택하여 정보를 출력하도록 하였다.


### 3. 조건에 맞는 사원 정보 조회하기
![sql-3](/img/sql_1105_4.png)

+ 직원 정보를 담은 HR_EMPLOYEES 테이블과 각 직원들의 상, 하반기 점수를 담은 HR_GRADE 테이블을 직원 번호(EMP_NO)를 기준으로 조인하였다.
+ **SUM** 함수를 사용하여 각 직원들의 상, 하반기 점수를 합산하였고, 전체 직원의 점수를 내림차순 정렬한 뒤 **LIMIT**을 사용하여 가장 점수가 높은 한 명만 출력되도록 하였다.